(my["webpackJsonp"] = my["webpackJsonp"] || []).push([["pages/index/index"],[
/* 0 */,
/* 1 */,
/* 2 */,
/* 3 */,
/* 4 */,
/* 5 */,
/* 6 */,
/* 7 */,
/* 8 */,
/* 9 */,
/* 10 */,
/* 11 */,
/* 12 */
/*!******************************************************************************************!*\
  !*** C:/Users/lixiaoyan/Desktop/test-ar-markup/main.js?{"page":"pages%2Findex%2Findex"} ***!
  \******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(createPage) {__webpack_require__(/*! uni-pages */ 5);


var _vue = _interopRequireDefault(__webpack_require__(/*! vue */ 4));
var _index = _interopRequireDefault(__webpack_require__(/*! ./pages/index/index.vue */ 13));function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };} // @ts-ignore
my.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;createPage(_index.default);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-alipay/dist/index.js */ 1)["createPage"]))

/***/ }),
/* 13 */
/*!***********************************************************************!*\
  !*** C:/Users/lixiaoyan/Desktop/test-ar-markup/pages/index/index.vue ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _index_vue_vue_type_template_id_57280228___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.vue?vue&type=template&id=57280228& */ 14);
/* harmony import */ var _index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.vue?vue&type=script&lang=js& */ 16);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _index_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index.vue?vue&type=style&index=0&lang=css& */ 21);
/* harmony import */ var _E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */ 11);

var renderjs





/* normalize component */

var component = Object(_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _index_vue_vue_type_template_id_57280228___WEBPACK_IMPORTED_MODULE_0__["render"],
  _index_vue_vue_type_template_id_57280228___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null,
  false,
  _index_vue_vue_type_template_id_57280228___WEBPACK_IMPORTED_MODULE_0__["components"],
  renderjs
)

component.options.__file = "pages/index/index.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),
/* 14 */
/*!******************************************************************************************************!*\
  !*** C:/Users/lixiaoyan/Desktop/test-ar-markup/pages/index/index.vue?vue&type=template&id=57280228& ***!
  \******************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_57280228___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228& */ 15);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_57280228___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_57280228___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return _E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_57280228___WEBPACK_IMPORTED_MODULE_0__["recyclableRender"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "components", function() { return _E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_57280228___WEBPACK_IMPORTED_MODULE_0__["components"]; });



/***/ }),
/* 15 */
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/lixiaoyan/Desktop/test-ar-markup/pages/index/index.vue?vue&type=template&id=57280228& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return recyclableRender; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "components", function() { return components; });
var components
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
}
var recyclableRender = false
var staticRenderFns = []
render._withStripped = true



/***/ }),
/* 16 */
/*!************************************************************************************************!*\
  !*** C:/Users/lixiaoyan/Desktop/test-ar-markup/pages/index/index.vue?vue&type=script&lang=js& ***!
  \************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js& */ 17);
/* harmony import */ var _E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),
/* 17 */
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/lixiaoyan/Desktop/test-ar-markup/pages/index/index.vue?vue&type=script&lang=js& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(uni) {Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _regenerator = _interopRequireDefault(__webpack_require__(/*! ./node_modules/@babel/runtime/regenerator */ 18));function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {try {var info = gen[key](arg);var value = info.value;} catch (error) {reject(error);return;}if (info.done) {resolve(value);} else {Promise.resolve(value).then(_next, _throw);}}function _asyncToGenerator(fn) {return function () {var self = this,args = arguments;return new Promise(function (resolve, reject) {var gen = fn.apply(self, args);function _next(value) {asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);}function _throw(err) {asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);}_next(undefined);});};} //
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

var canvas;
var gl;

var test;

var w = 0;
var h = 0;

//唇彩图片
var img;
//唇彩图片路径
var imgPath;
//唇彩特效透明度
var translucent;
var translucentBase = 1;
//嘴唇面片缩放系数
var lipScale;

//阿里ar sdk嘴唇关键点起始索引
var lipMarkBeginIndex;
//德劳内三角化退化成查找表
var lipIndex = new Int32Array([
84, 85, 96,
96, 85, 97,
97, 85, 86,
97, 86, 87,
97, 87, 98,
98, 87, 88,
98, 88, 99,
99, 88, 89,
99, 89, 100,
100, 89, 90,
84, 96, 95,
95, 96, 103,
95, 103, 94,
94, 103, 102,
94, 102, 93,
93, 102, 101,
93, 101, 92,
92, 101, 91,
91, 101, 100,
91, 100, 90]);


//关键点缩放的点对索引
var lipScaleIndex = new Int32Array([
84, 96,
96, 84,
85, 97,
86, 97,
97, 86,
87, 98,
98, 87,
88, 99,
99, 88,
89, 99,
90, 100,
100, 90,
91, 101,
92, 101,
101, 92,
93, 102,
102, 93,
94, 103,
103, 94,
95, 103]);


var lipTexCoordnate = new Float32Array([
0, 0.5,
0.153, 0.686,
0.368, 0.741,
0.5, 0.693,
0.632, 0.741,
0.847, 0.686,
1, 0.5,
0.863, 0.311,
0.677, 0.24,
0.5, 0.212,
0.323, 0.24,
0.137, 0.311,
0.072, 0.499,
0.363, 0.504,
0.5, 0.488,
0.637, 0.504,
0.928, 0.499,
0.637, 0.475,
0.5, 0.464,
0.363, 0.475]);


var quadVertex = new Float32Array([
-1.0, 1.0, 0.0, 0.0,
-1.0, -1.0, 0.0, 1.0,
1.0, -1.0, 1.0, 1.0,
1.0, -1.0, 1.0, 1.0,
1.0, 1.0, 1.0, 0.0,
-1.0, 1.0, 0.0, 0.0]);

var lipVertex = new Float32Array([
-1.0, 1.0, 0.0, 0.0, 1.0,
-1.0, -1.0, 0.0, 1.0, 1.0,
1.0, -1.0, 1.0, 1.0, 1.0,
1.0, -1.0, 1.0, 1.0, 1.0,
1.0, 1.0, 1.0, 0.0, 1.0,
-1.0, 1.0, 0.0, 0.0, 1.0]);

//render resource
var vertShader;
var fragShader;
var shaderProgram;
var quadVertShader;
var quadFragShader;
var quadShaderProgram;
var vertexbuffer;
var quadVertexbuffer;
var lipPoints;
var lipPointsIndex;
var lipPointsScale;
var lipPointsUnScale;
var lipTexture;
var cameraTexture;var _default =


{
  name: 'ar-camera-com',
  data: function data() {
    return {
      points: [],
      canvasObj: {
        width: 0,
        height: 0,
        top: 0,
        left: 0,
        pixelRatio: 1 },

      gl: null,
      canvas: null,
      lipMarkBeginIndex: 84, //阿里ar sdk嘴唇关键点起始索引
      lipScale: null, //嘴唇面片缩放系数
      facePoints: {},
      points84By63: [
      957.50409482,
      2048.25090186,
      1024.20328954,
      2021.00354189,
      1100.35535717,
      1996.00218737,
      1145.56652331,
      2007.07288401,
      1189.2633217,
      1996.04795256,
      1261.4984701,
      2017.43906306,
      1325.22831509,
      2046.56618589,
      1276.55727626,
      2093.84743997,
      1224.39282784,
      2134.3206981,
      1144.65582022,
      2144.29859945,
      1069.32946318,
      2129.80846816,
      1011.42414683,
      2094.29104754,
      988.1676205,
      2055.62188232,
      1054.90785861,
      2052.97282839,
      1152.7350715,
      2054.15642762,
      1241.12630101,
      2056.98369944,
      1299.69763407,
      2046.2361438,
      1237.68592091,
      2062.30674812,
      1145.72936507,
      2071.47383073,
      1024.20328954,
      2021.00354189],

      translucent: 0.5,
      imgLipstick: 'https://cdn-mdj.oss-cn-beijing.aliyuncs.com/common/test-ar-makeup/lipColor1.png',
      imgModel: 'https://cdn-mdj.oss-cn-beijing.aliyuncs.com/common/test-ar-makeup/model.jpg',
      isFaceBeauty: true,
      isShowFacePoints: false,
      vertexs: new Float32Array([
      -1.0, 1.0, 0.0, 0.0, 1.0,
      -1.0, -1.0, 0.0, 0.0, 0.0,
      1.0, 1.0, 0.0, 1.0, 1.0,
      1.0, -1.0, 0.0, 1.0, 0.0]) };

  },
  props: {},
  components: {},
  computed: {},
  created: function created() {
    // this.setCanvasWh();
    // this.handleARFrame1();
  },
  onReady: function onReady() {
    console.log('。。。。。。。onReady。。。');
  },
  methods: {
    imgLoad: function imgLoad(e) {
      console.log(e, 'width', e.detail.width);
      console.log('height：', e.detail.height);
      var systemInfo = uni.getSystemInfoSync();
      this.imgWidth = e.detail.width;
      this.imgHeight = e.detail.height;
      var w = systemInfo.windowWidth;
      var h = systemInfo.windowHeight;
      var r = e.detail.width / e.detail.height;
      console.log(systemInfo, 'getImageInfo', this.canvasObj, w, h, r);
      if (w / h < r) {
        // 表示高是短边,现在宽剧中
        this.canvasObj.height = h;
        this.canvasObj.width = r * h;
        this.canvasObj.top = 0 + 'px';
        this.canvasObj.left = (w - this.canvasObj.width) / 2;
      } else {
        this.canvasObj.width = w;
        this.canvasObj.height = w / r;
        this.canvasObj.top = (h - this.canvasObj.height) / 2;
        this.canvasObj.left = 0;
      }
      this.canvasObj.pixelRatio = systemInfo.pixelRatio;
      console.log(w / h < r, '。。。。。。。this.canvasObj。。。', this.canvasObj);
      this.canvasWxFn();
    },
    handleARFrame1: function handleARFrame1() {
      var rawPoints = this.points84By63;
      var len = 106;
      for (var i = 0; i < 84; i++) {
        rawPoints.unshift(0.1, 0.1);
      }
      for (var i = 104; i < len; i++) {
        rawPoints.push(0.1, 0.1);
      }
      function transformPoint(point, fw, fh) {
        return [point[0] / fw * 2 - 1, (1 - point[1] / fh) * 2 - 1];
      }
      var points = [];

      for (var i = 0; i < 106; i++) {
        points.push(transformPoint([rawPoints[i * 2], rawPoints[i * 2 + 1]], this.imgWidth, this.imgHeight));
      }

      console.log(points, '...gl 出来了么....', this.imgWidth, this.imgHeight);
      this.points = points;
    },
    canvasWxFn: function canvasWxFn() {
      this.handleARFrame1();





















































      // this.onCanvasReady('arcanvas')
    },

    setCanvasWh: function setCanvasWh() {
      var systemInfo = my.getSystemInfoSync();
      var w = systemInfo.windowWidth;
      var h = systemInfo.windowHeight;
      var r = 720 / 1280;
      if (w / h < r) {
        // 表示高是短边,现在宽剧中
        this.canvasObj.height = h;
        this.canvasObj.width = r * h;
        this.canvasObj.top = 0 + 'px';
        this.canvasObj.left = (w - this.canvasObj.width) / 2;
      } else {
        this.canvasObj.width = w;
        this.canvasObj.height = w / r;
        this.canvasObj.top = (h - this.canvasObj.height) / 2;
        this.canvasObj.left = 0;
      }
      this.canvasObj.pixelRatio = systemInfo.pixelRatio;
      console.log(w / h < r, '。。。。。。。this.canvasObj。。。', this.canvasObj);
    },
    onCanvasReady: function onCanvasReady(id) {var _this = this;


      // 页面加载完成
      var self = this;
      translucent = this.translucent * translucentBase;
      lipMarkBeginIndex = this.lipMarkBeginIndex = 84;
      lipScale = this.lipScale = 0.01;
      my._createCanvas({
        id: id,
        success: function success(c) {
          var systemInfo = my.getSystemInfoSync();
          console.log('。。。systemInfo。。', JSON.stringify(systemInfo));
          c.height = _this.canvasObj.height * systemInfo.pixelRatio;
          c.width = _this.canvasObj.width * systemInfo.pixelRatio;
          console.log('。。。。。。。my.createCanvas。。success。', c);
          self.gl = c.getContext('webgl');
          gl = self.gl;
          self.canvas = c;
          canvas = c;

        },
        fail: function fail() {
          console.log('。。。。。。。my.createCanvas。。fail。');
        } });


      this.initRenderPipeline();

      this.changeLipStyle(this.imgLipstick);
      this.faceBeautyFn();

    },


    initRenderPipeline: function initRenderPipeline() {
      var vertCode = "#version 300 es\n\t\t\t\t\t  layout(location = 0) in vec2 a_position;\n\t\t\t\t\t  layout(location = 1) in vec3 a_uv;\n\t\t\t\t\t  out vec3 uv_out;\n\t\t\t\t\t  void main() {\n\t\t\t\t\t\tgl_Position = vec4(a_position, 1.0, 1.0);\n\t\t\t\t\t\tuv_out = a_uv;\n\t\t\t\t\t\t//uv_out = vec2(1.0, 0.0);\n\t\t\t\t\t  }\n\t\t\t\t\t  ";











      var fragCode = "#version 300 es\n\t\t\t\t\t  precision mediump float;\n\t\t\t\t\t  in vec3 uv_out;\n\t\t\t\t\t  uniform sampler2D u_texture;\n\t\t\t\t\t  uniform sampler2D u_texture2;\n\t\t\t\t\t  layout(location = 0) out vec4 outColor;\n\t\t\t\t\t  void main() {\n\n\t\t\t\t\t\tvec2 uv = vec2(uv_out.x, 1.0 - uv_out.y);\n\t\t\t\t\t\tvec3 lipColor = texture(u_texture, uv).xyz;\n\t\t\t\t\t\tvec3 c = lipColor;\n\t\t\t\t\t\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\t\t\t\t\t\tvec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n\t\t\t\t\t\tvec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n\t\t\t\t\t\tfloat d = q.x - min(q.w, q.y);\n\t\t\t\t\t\tfloat e = 1.0e-10;\n\t\t\t\t\t\tvec3 hc = vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n\n\t\t\t\t\t\thc.y *= 1.2;\n\n\t\t\t\t\t\tvec4 L = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\t\t\t\t\t\tvec3 M = abs(fract(hc.xxx + L.xyz) * 6.0 - L.www);\n\t\t\t\t\t\tvec3 color = hc.z * mix(L.xxx, clamp(M - L.xxx, 0.0, 1.0), hc.y);\n\n\t\t\t\t\t\t//outColor = vec4(color, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t//vec4 lipColor = texture(u_texture, uv);\n\t\t\t\t\t\tvec4 frameColor = texture(u_texture2, uv_out.xy);\n\t\t\t\t\t\t//vec3 finalColor = lipColor.xyz * lipColor.w + frameColor.xyz * (1.0 - lipColor.w);\n\t\t\t\t\t\tfloat alpha = texture(u_texture, uv).w;\n\t\t\t\t\t\t//outColor = vec4(color.xyz, alpha);\n\t\t\t\t\t\toutColor = vec4(color.xyz, alpha * uv_out.z);\n\t\t\t\t\t  }\n\t\t\t\t\t  ";





































      vertShader = gl.createShader(gl.VERTEX_SHADER);
      gl.shaderSource(vertShader, vertCode);
      gl.compileShader(vertShader);
      console.log("vertShader is compileShader ");

      fragShader = gl.createShader(gl.FRAGMENT_SHADER);
      gl.shaderSource(fragShader, fragCode);
      gl.compileShader(fragShader);
      console.log("fragShader is compileShader ");

      shaderProgram = gl.createProgram();
      gl.attachShader(shaderProgram, vertShader);
      gl.attachShader(shaderProgram, fragShader);
      gl.linkProgram(shaderProgram);
      gl.useProgram(shaderProgram);
      console.log("shaderProgram ");

      var FSIZE = 4;

      vertexbuffer = gl.createBuffer();
      var aposlocation = gl.getAttribLocation(shaderProgram, 'a_position');
      gl.enableVertexAttribArray(aposlocation);
      gl.vertexAttribPointer(aposlocation, 3, gl.FLOAT, false, FSIZE * 6, 0);
      console.log("aposlocation： ", aposlocation);

      var auv = gl.getAttribLocation(shaderProgram, 'a_uv');
      gl.enableVertexAttribArray(auv);
      gl.vertexAttribPointer(auv, 3, gl.FLOAT, false, FSIZE * 6, FSIZE * 3);
      console.log("auv： ", auv);


      var quadVertCode = "#version 300 es\n\t\t\t\t  layout(location = 0) in vec2 a_position;\n\t\t\t\t  layout(location = 1) in vec2 a_uv;\n\t\t\t\t  out vec2 uv_out;\n\t\t\t\t  void main() {\n\t\t\t\t\tgl_Position = vec4(a_position, 1.0, 1.0);\n\t\t\t\t\tuv_out = a_uv;\n\t\t\t\t  }\n\t\t\t\t  ";










      var quadFragCode = "#version 300 es\n\t\t\t\t  precision mediump float;\n\t\t\t\t  in vec2 uv_out;\n\t\t\t\t  uniform sampler2D u_texture;\n\t\t\t\t  layout(location = 0) out vec4 outColor;\n\t\t\t\t  void main() {\n\t\t\t\t\tvec2 uv = vec2(uv_out.x, uv_out.y);\n\t\t\t\t\toutColor = vec4(texture(u_texture, uv).xyz, 1.0);\n\t\t\t\t  }\n\t\t\t\t  ";











      quadVertShader = gl.createShader(gl.VERTEX_SHADER);
      gl.shaderSource(quadVertShader, quadVertCode);
      gl.compileShader(quadVertShader);

      quadFragShader = gl.createShader(gl.FRAGMENT_SHADER);
      gl.shaderSource(quadFragShader, quadFragCode);
      gl.compileShader(quadFragShader);

      quadShaderProgram = gl.createProgram();
      gl.attachShader(quadShaderProgram, quadVertShader);
      gl.attachShader(quadShaderProgram, quadFragShader);
      gl.linkProgram(quadShaderProgram);
      gl.useProgram(quadShaderProgram);


      quadVertexbuffer = gl.createBuffer();
      gl.bindBuffer(gl.ARRAY_BUFFER, quadVertexbuffer);
      gl.bufferData(gl.ARRAY_BUFFER, quadVertex, gl.STATIC_DRAW);

      var qposlocation = gl.getAttribLocation(quadShaderProgram, 'a_position');
      gl.enableVertexAttribArray(qposlocation);
      gl.vertexAttribPointer(qposlocation, 2, gl.FLOAT, false, FSIZE * 4, 0);
      console.log("qposlocation： ", qposlocation);

      var quv = gl.getAttribLocation(quadShaderProgram, 'a_uv');
      gl.enableVertexAttribArray(quv);
      gl.vertexAttribPointer(quv, 2, gl.FLOAT, false, FSIZE * 4, FSIZE * 2);
      console.log("quv： ", quv);

      gl.useProgram(0);

      lipTexture = gl.createTexture();
      gl.bindTexture(gl.TEXTURE_2D, lipTexture);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);


      cameraTexture = gl.createTexture();
      gl.bindTexture(gl.TEXTURE_2D, cameraTexture);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);

      gl.bindTexture(0);

      lipPoints = [];
      lipPointsScale = [];
      lipPointsUnScale = [];
      var lipPointCount = 106 * 2;
      for (var i = 0; i < lipPointCount; i++) {
        lipPoints.push(0.0);
        lipPoints.push(0.0);
        lipPoints.push(0.0);
        lipPoints.push(0.0);
        lipPoints.push(0.0);
      }


    },
    releaseRenderFacePoints: function releaseRenderFacePoints() {
      gl.deleteShader(this.facePoints.vertShader);
      gl.deleteShader(this.facePoints.fragShader);
      gl.deleteProgram(this.facePoints.shaderProgram);
    },
    releaseRenderResource: function releaseRenderResource() {
      gl.deleteShader(vertShader);
      gl.deleteShader(fragShader);
      gl.deleteProgram(shaderProgram);
      gl.deleteShader(quadVertShader);
      gl.deleteShader(quadFragShader);
      gl.deleteProgram(quadShaderProgram);
      gl.deleteBuffer(vertexbuffer);
      gl.deleteTexture(lipTexture);
      gl.deleteTexture(cameraTexture);
      this.releaseRenderFacePoints();
    },
    drawFaceLip: function drawFaceLip(points) {
      var lipPointCount = lipIndex.length;
      for (var i = 0; i < lipPointCount; i++) {
        var index = lipIndex[i];
        lipPoints[i * 5] = points[index][0];
        lipPoints[i * 5 + 1] = points[index][1];
        lipPoints[i * 5 + 2] = lipTexCoordnate[2 * (index - lipMarkBeginIndex)];
        lipPoints[i * 5 + 3] = lipTexCoordnate[2 * (index - lipMarkBeginIndex) + 1];
        lipPoints[i * 5 + 4] = translucent;
      }



      gl.bindBuffer(gl.ARRAY_BUFFER, vertexbuffer);
      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(lipPoints), gl.STREAM_DRAW);

      gl.clearColor(0.0, 0.0, 0.0, 0.0);
      // gl.clearDepth(1.0);
      gl.clear(gl.COLOR_BUFFER_BIT);
      gl.disable(gl.DEPTH_TEST);



      var FSIZE = 4;

      //Pass one
      gl.disable(gl.BLEND);
      gl.bindBuffer(gl.ARRAY_BUFFER, quadVertexbuffer);
      console.log('draw quadVertexbuffer:', quadVertexbuffer);

      var qposlocation = gl.getAttribLocation(quadShaderProgram, 'a_position');
      gl.vertexAttribPointer(qposlocation, 2, gl.FLOAT, false, FSIZE * 4, 0);
      gl.enableVertexAttribArray(qposlocation);
      console.log('draw qposlocation:', qposlocation);


      var quv = gl.getAttribLocation(quadShaderProgram, 'a_uv');
      gl.vertexAttribPointer(quv, 2, gl.FLOAT, false, FSIZE * 4, FSIZE * 2);
      gl.enableVertexAttribArray(quv);
      console.log('draw quv:', quv);


      gl.activeTexture(gl.TEXTURE0);
      gl.bindTexture(gl.TEXTURE_2D, cameraTexture);
      gl.useProgram(quadShaderProgram);
      //gl.polygonMode(gl.FRONT_AND_BACK, gl.FILL);
      gl.drawArrays(gl.TRIANGLES, 0, 6);
      console.log('draw drawArrays zhengge :');


      //Pass two
      gl.enable(gl.BLEND);
      // gl.enable(gl.DEPTH_TEST);
      // gl.depthFunc(gl.LESS);
      gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);
      gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);
      gl.bindBuffer(gl.ARRAY_BUFFER, vertexbuffer);
      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(lipPoints), gl.STREAM_DRAW);

      var aposlocation = gl.getAttribLocation(shaderProgram, 'a_position');
      gl.vertexAttribPointer(aposlocation, 2, gl.FLOAT, false, FSIZE * 5, 0);
      gl.enableVertexAttribArray(aposlocation);
      console.log('draw aposlocation :', aposlocation);

      var auv = gl.getAttribLocation(shaderProgram, 'a_uv');
      gl.vertexAttribPointer(auv, 3, gl.FLOAT, false, FSIZE * 5, FSIZE * 2);
      gl.enableVertexAttribArray(auv);
      console.log('draw auv :', auv);

      gl.activeTexture(gl.TEXTURE0);
      gl.bindTexture(gl.TEXTURE_2D, lipTexture);
      gl.activeTexture(gl.TEXTURE1);
      gl.bindTexture(gl.TEXTURE_2D, cameraTexture);
      gl.useProgram(shaderProgram);
      //gl.polygonMode(gl.FRONT_AND_BACK, gl.LINE);

      gl.drawArrays(gl.TRIANGLES, 0, 60);
    },
    changeLipStyle1: function changeLipStyle1(lipTexturePath) {
      //let imgPath = '/static/images/lipColor.png';


      //let imgPath = '/static/images/lipColor.png';
      var imgPath = lipTexturePath;
      img = canvas.createImage();
      img.onload = function () {
        gl.bindTexture(gl.TEXTURE_2D, lipTexture);
        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);
      };
      img.onerror = function (res) {
        console.log('......图片错误..', res, img);
      };
      img.src = imgPath;
    },
    changeLipStyle: function changeLipStyle(lipTexturePath) {var _this2 = this;
      //let imgPath = '/static/images/lipColor.png';
      // //唇彩图片
      // var img;
      // //唇彩图片路径
      // var imgPath;

      return new Promise(function (resolve, reject) {
        console.log(_this2.canvas, '......图片.this.canvas.', lipTexturePath);
        var imgPath = lipTexturePath;
        var img1 = canvas.createImage();
        img1.onload = function (res) {
          // this.initRenderPipeline();
          // gl.bindTexture(gl.TEXTURE_2D, lipTexture);
          // gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);
          resolve(img1);

          console.log(lipTexture, '......图片..', res, img);

        };
        img1.onerror = function (res) {
          console.log('......图片错误..', res, img);
          reject();
        };
        img1.src = imgPath;
      });

    },

    updateFaceData: function updateFaceData(data, width, height) {
      var dataFrame = new Uint8Array(data);
      gl.bindTexture(gl.TEXTURE_2D, cameraTexture);
      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, dataFrame);
    },
    drawFacePoints: function drawFacePoints(points) {
      var pointCount = points.length;
      if (pointCount == 0) return;
      var vertices = [];
      for (var i = 0; i < pointCount; i++) {
        vertices.push(points[i][0]);
        vertices.push(points[i][1]);
        vertices.push(0.0);
      }

      // Create an empty buffer object to store the vertex buffer
      var vertex_buffer = gl.createBuffer();

      //Bind appropriate array buffer to it
      gl.bindBuffer(gl.ARRAY_BUFFER, vertex_buffer);

      // Pass the vertex data to the buffer
      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
      // Unbind the buffer
      gl.bindBuffer(gl.ARRAY_BUFFER, null);

      /*=========================Shaders========================*/

      // vertex shader source code
      var vertCode = "attribute vec3 coordinates;\n\t\t    void main(void) {\n\t\t\t\tgl_Position = vec4(coordinates, 1.0);\n\t\t\t\tgl_PointSize = 5.0;\n\t\t    }";





      // Create a vertex shader object
      this.facePoints.vertShader = gl.createShader(gl.VERTEX_SHADER);
      // Attach vertex shader source code
      gl.shaderSource(this.facePoints.vertShader, vertCode);

      // Compile the vertex shader
      gl.compileShader(this.facePoints.vertShader);

      // fragment shader source code
      var fragCode = "precision mediump float;\n\t\t\tuniform vec4 u_FragColor;\n\t\t\tvoid main(){\n\t\t\t    gl_FragColor=u_FragColor;\n\t\t\t}";





      // Create fragment shader object
      this.facePoints.fragShader = gl.createShader(gl.FRAGMENT_SHADER);

      // Attach fragment shader source code
      gl.shaderSource(this.facePoints.fragShader, fragCode);

      // Compile the fragmentt shader
      gl.compileShader(this.facePoints.fragShader);

      // Create a shader program object to store
      // the combined shader program
      this.facePoints.shaderProgram = gl.createProgram();

      // Attach a vertex shader
      gl.attachShader(this.facePoints.shaderProgram, this.facePoints.vertShader);

      // Attach a fragment shader
      gl.attachShader(this.facePoints.shaderProgram, this.facePoints.fragShader);

      // Link both programs
      gl.linkProgram(this.facePoints.shaderProgram);

      // Use the combined shader program object
      gl.useProgram(this.facePoints.shaderProgram);

      /*======== Associating shaders to buffer objects ========*/

      // Bind vertex buffer object
      gl.bindBuffer(gl.ARRAY_BUFFER, vertex_buffer);

      // Get the attribute location
      var coord = gl.getAttribLocation(this.facePoints.shaderProgram, 'coordinates');

      // Point an attribute to the currently bound VBO
      gl.vertexAttribPointer(coord, 3, gl.FLOAT, false, 0, 0);

      //获取uniform 变量
      var u_FragColor = gl.getUniformLocation(this.facePoints.shaderProgram, 'u_FragColor');
      var rgba = this.isShowFacePoints ? 1.0 : 0.0;
      //修改uniform 变量
      gl.uniform4f(u_FragColor, 1.0, 0.0, 0.0, 1.0);

      // gl.clearColor(0.0,0.0,0.0,0.0);
      // gl.clear(gl.COLOR_BUFFER_BIT);
      // Draw the triangle
      gl.drawArrays(gl.POINTS, 0, pointCount);
    } },

  mounted: function mounted() {},
  onShow: function onShow() {
    // this.$nextTick(() => {
    // 	this.$refs.brightness.getScreenBrightness()
    // })
  },
  onLoad: function onLoad() {return _asyncToGenerator( /*#__PURE__*/_regenerator.default.mark(function _callee() {return _regenerator.default.wrap(function _callee$(_context) {while (1) {switch (_context.prev = _context.next) {case 0:case "end":return _context.stop();}}}, _callee);}))();},
  beforeDestroy: function beforeDestroy() {
    // 退出释放资源
    this.releaseRenderResource();
  },
  onUnload: function onUnload() {},
  onHide: function onHide() {} };exports.default = _default;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-alipay/dist/index.js */ 1)["default"]))

/***/ }),
/* 18 */,
/* 19 */,
/* 20 */,
/* 21 */
/*!********************************************************************************************************!*\
  !*** C:/Users/lixiaoyan/Desktop/test-ar-markup/pages/index/index.vue?vue&type=style&index=0&lang=css& ***!
  \********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css& */ 22);
/* harmony import */ var _E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_3_3_11_20220209_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),
/* 22 */
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/lixiaoyan/Desktop/test-ar-markup/pages/index/index.vue?vue&type=style&index=0&lang=css& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
    if(false) { var cssReload; }
  

/***/ })
],[[12,"common/runtime","common/vendor"]]]);