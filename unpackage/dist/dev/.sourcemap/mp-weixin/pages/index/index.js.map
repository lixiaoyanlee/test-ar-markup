{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/lixiaoyan/Desktop/test-ar-markup/pages/index/index.vue?edf2","webpack:///C:/Users/lixiaoyan/Desktop/test-ar-markup/pages/index/index.vue?6c49","webpack:///C:/Users/lixiaoyan/Desktop/test-ar-markup/pages/index/index.vue?c7c1","uni-app:///pages/index/index.vue","webpack:///C:/Users/lixiaoyan/Desktop/test-ar-markup/pages/index/index.vue?557b","webpack:///C:/Users/lixiaoyan/Desktop/test-ar-markup/pages/index/index.vue?6172"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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;;;;;;;;;;AAsCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;;;;;;;;;;AAWA;;;;;;;;;;;;AAYA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,KAvUA;AAwUA,2BAxUA,qCAwUA;AACA;AACA;AACA;AACA,KA5UA;AA6UA,yBA7UA,mCA6UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAxVA;AAyVA,eAzVA,uBAyVA,MAzVA,EAyVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAtaA;AAuaA,mBAvaA,2BAuaA,cAvaA,EAuaA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA;AAIA;AACA;AACA,OAFA;AAGA;AACA,KAtbA;AAubA,kBAvbA,0BAubA,cAvbA,EAubA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,SARA;AASA;AACA;AACA;AACA,SAHA;AAIA;AACA,OAlBA;;AAoBA,KAldA;;AAodA,kBApdA,0BAodA,IApdA,EAodA,KApdA,EAodA,MApdA,EAodA;AACA;AACA;AACA;AACA,KAxdA;AAydA,kBAzdA,0BAydA,MAzdA,EAydA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;;;;AAMA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;AAMA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KApjBA,EAjFA;;AAuoBA,SAvoBA,qBAuoBA,EAvoBA;AAwoBA,QAxoBA,oBAwoBA;AACA;AACA;AACA;AACA,GA5oBA;AA6oBA,QA7oBA,oBA6oBA,qQA7oBA;AA8oBA,eA9oBA,2BA8oBA;AACA;AACA;AACA,GAjpBA;AAkpBA,UAlpBA,sBAkpBA,EAlpBA;AAmpBA,QAnpBA,oBAmpBA,EAnpBA,E;;;;;;;;;;;;;;;ACjJA;AAAA;AAAA;AAAA;AAA0kC,CAAgB,wiCAAG,EAAC,C;;;;;;;;;;ACA9lC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=57280228&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t<image\r\n\t\t:src=\"imgModel\"\r\n\t\tclass=\"mode-img\"\r\n\t\t@load=\"imgLoad\"\r\n\t\t:style=\"{ width: canvasObj.width + 'px', height: canvasObj.height + 'px', top: canvasObj.top + 'px', left: canvasObj.left + 'px' }\"\r\n\t></image>\r\n\t<button style=\"position: absolute;top: 100px; \"> 哈哈哈</button>\r\n\t<canvas\r\n\t\tid=\"arcanvas\"\r\n\t\ttype=\"webgl\"\r\n\t\t\r\n\t\t:style=\"{ width: canvasObj.width + 'px', height: canvasObj.height + 'px', top: canvasObj.top + 'px', left: canvasObj.left + 'px' }\"\r\n\t></canvas>\r\n\t<button style=\"position: absolute;top: 200px; z-index: 22;\"> 略略</button>\r\n\t\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nvar canvas;\nvar gl;\n\nvar test;\n\nvar w = 0;\nvar h = 0;\n\n//唇彩图片\nvar img;\n//唇彩图片路径\nvar imgPath;\n//唇彩特效透明度\nvar translucent;\r\nvar translucentBase = 1\n//嘴唇面片缩放系数\nvar lipScale;\n\n//阿里ar sdk嘴唇关键点起始索引\nvar lipMarkBeginIndex;\n//德劳内三角化退化成查找表\nconst lipIndex = new Int32Array([\n  84, 85, 96,\n  96, 85, 97,\n  97, 85, 86,\n  97, 86, 87,\n  97, 87, 98,\n  98, 87, 88,\n  98, 88, 99,\n  99, 88, 89,\n  99, 89, 100,\n  100, 89, 90,\n  84, 96, 95,\n  95, 96, 103,\n  95, 103, 94,\n  94, 103, 102,\n  94, 102, 93,\n  93, 102, 101,\n  93, 101, 92,\n  92, 101, 91,\n  91, 101, 100,\n  91, 100, 90\n    ]);\n\n//关键点缩放的点对索引\nconst lipScaleIndex = new Int32Array([\n  84, 96,\n  96, 84,\n  85, 97,\n  86, 97,\n  97, 86,\n  87, 98,\n  98, 87,\n  88, 99,\n  99, 88,\n  89, 99,\n  90, 100,\n  100, 90,\n  91, 101,\n  92, 101,\n  101, 92,\n  93, 102,\n  102, 93,\n  94, 103,\n  103, 94,\n  95, 103\n    ]);\n\nconst lipTexCoordnate = new Float32Array([\n    0, 0.5,\n    0.153, 0.686,\n    0.368, 0.741,\n    0.5, 0.693,\n    0.632, 0.741,\n    0.847, 0.686,\n    1, 0.5,\n    0.863, 0.311,\n    0.677, 0.24,\n    0.5, 0.212,\n    0.323, 0.24,\n    0.137, 0.311,\n    0.072, 0.499,\n    0.363, 0.504,\n    0.5, 0.488,\n    0.637, 0.504,\n    0.928, 0.499,\n    0.637, 0.475,\n    0.5, 0.464,\n    0.363, 0.475\n  ]);\n\nconst quadVertex = new Float32Array([\n    -1.0, 1.0, 0.0, 0.0,\n    -1.0, -1.0, 0.0, 1.0,\n    1.0, -1.0, 1.0, 1.0,\n    1.0, -1.0, 1.0, 1.0,\n    1.0, 1.0, 1.0, 0.0,\n    -1.0, 1.0, 0.0, 0.0]);\n\nconst lipVertex = new Float32Array([\n    -1.0, 1.0, 0.0, 0.0, 1.0,\n    -1.0, -1.0, 0.0, 1.0, 1.0,\n    1.0, -1.0, 1.0, 1.0, 1.0,\n    1.0, -1.0, 1.0, 1.0, 1.0,\n    1.0, 1.0, 1.0, 0.0, 1.0,\n    -1.0, 1.0, 0.0, 0.0, 1.0]);\n\n//render resource\nvar vertShader;\nvar fragShader;\nvar shaderProgram;\nvar quadVertShader;\nvar quadFragShader;\nvar quadShaderProgram;\nvar vertexbuffer;\nvar quadVertexbuffer;\nvar lipPoints;\nvar lipPointsIndex;\nvar lipPointsScale;\nvar lipPointsUnScale;\nvar lipTexture;\nvar cameraTexture;\n\r\n\r\nexport default {\r\n\tname: 'ar-camera-com',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tpoints:[],\r\n\t\t\tcanvasObj: {\r\n\t\t\t\twidth: 0,\r\n\t\t\t\theight: 0,\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tleft: 0,\r\n\t\t\t\tpixelRatio: 1\r\n\t\t\t},\r\n\t\t\tgl: null,\r\n\t\t\tcanvas: null,\r\n\t\t\tlipMarkBeginIndex: 84, //阿里ar sdk嘴唇关键点起始索引\r\n\t\t\tlipScale: null, //嘴唇面片缩放系数\r\n\t\t\tfacePoints: {},\r\n\t\t\tpoints84By63: [\r\n\t\t\t\t957.50409482,\r\n\t\t\t\t2048.25090186,\r\n\t\t\t\t1024.20328954,\r\n\t\t\t\t2021.00354189,\r\n\t\t\t\t1100.35535717,\r\n\t\t\t\t1996.00218737,\r\n\t\t\t\t1145.56652331,\r\n\t\t\t\t2007.07288401,\r\n\t\t\t\t1189.2633217,\r\n\t\t\t\t1996.04795256,\r\n\t\t\t\t1261.4984701,\r\n\t\t\t\t2017.43906306,\r\n\t\t\t\t1325.22831509,\r\n\t\t\t\t2046.56618589,\r\n\t\t\t\t1276.55727626,\r\n\t\t\t\t2093.84743997,\r\n\t\t\t\t1224.39282784,\r\n\t\t\t\t2134.3206981,\r\n\t\t\t\t1144.65582022,\r\n\t\t\t\t2144.29859945,\r\n\t\t\t\t1069.32946318,\r\n\t\t\t\t2129.80846816,\r\n\t\t\t\t1011.42414683,\r\n\t\t\t\t2094.29104754,\r\n\t\t\t\t988.1676205,\r\n\t\t\t\t2055.62188232,\r\n\t\t\t\t1054.90785861,\r\n\t\t\t\t2052.97282839,\r\n\t\t\t\t1152.7350715,\r\n\t\t\t\t2054.15642762,\r\n\t\t\t\t1241.12630101,\r\n\t\t\t\t2056.98369944,\r\n\t\t\t\t1299.69763407,\r\n\t\t\t\t2046.2361438,\r\n\t\t\t\t1237.68592091,\r\n\t\t\t\t2062.30674812,\r\n\t\t\t\t1145.72936507,\r\n\t\t\t\t2071.47383073,\r\n\t\t\t\t1024.20328954,\r\n\t\t\t\t2021.00354189\r\n\t\t\t],\r\n\t\t\ttranslucent: 0.5,\r\n\t\t\timgLipstick: 'https://cdn-mdj.oss-cn-beijing.aliyuncs.com/common/test-ar-makeup/lipColor1.png',\r\n\t\t\timgModel: 'https://cdn-mdj.oss-cn-beijing.aliyuncs.com/common/test-ar-makeup/model.jpg',\r\n\t\t\tisFaceBeauty: true,\r\n\t\t\tisShowFacePoints: false,\r\n\t\t\t vertexs: new Float32Array([\r\n\t\t\t      -1.0, 1.0, 0.0, 0.0, 1.0,\r\n\t\t\t      -1.0, -1.0, 0.0, 0.0, 0.0,\r\n\t\t\t      1.0, 1.0, 0.0, 1.0, 1.0,\r\n\t\t\t      1.0, -1.0, 0.0, 1.0, 0.0])\r\n\t\t};\r\n\t},\r\n\tprops: {},\r\n\tcomponents: {},\r\n\tcomputed: {},\r\n\tcreated() {\r\n\t\t// this.setCanvasWh();\r\n\t\t// this.handleARFrame1();\r\n\t},\r\n\tonReady() {\r\n\t\tconsole.log('。。。。。。。onReady。。。');\r\n\t},\r\n\tmethods: {\r\n\t\timgLoad(e) {\r\n\t\t\tconsole.log(e, 'width', e.detail.width);\r\n\t\t\tconsole.log('height：', e.detail.height);\r\n\t\t\tvar systemInfo = uni.getSystemInfoSync();\r\n\t\t\tthis.imgWidth = e.detail.width\r\n\t\t\tthis.imgHeight = e.detail.height\r\n\t\t\tlet w =  systemInfo.windowWidth;\r\n\t\t\tlet h =  systemInfo.windowHeight;\r\n\t\t\tlet r = e.detail.width / e.detail.height;\r\n\t\t\tconsole.log(systemInfo, 'getImageInfo', this.canvasObj, w, h, r);\r\n\t\t\tif (w / h < r) {\r\n\t\t\t\t// 表示高是短边,现在宽剧中\r\n\t\t\t\tthis.canvasObj.height = h;\r\n\t\t\t\tthis.canvasObj.width = r * h;\r\n\t\t\t\tthis.canvasObj.top = 0 + 'px';\r\n\t\t\t\tthis.canvasObj.left = (w - this.canvasObj.width) / 2;\r\n\t\t\t} else {\r\n\t\t\t\tthis.canvasObj.width = w;\r\n\t\t\t\tthis.canvasObj.height = w / r;\r\n\t\t\t\tthis.canvasObj.top = (h - this.canvasObj.height) / 2;\r\n\t\t\t\tthis.canvasObj.left = 0;\r\n\t\t\t}\r\n\t\t\tthis.canvasObj.pixelRatio = systemInfo.pixelRatio;\r\n\t\t\tconsole.log(w / h < r, '。。。。。。。this.canvasObj。。。', this.canvasObj);\r\n\t\t\tthis.canvasWxFn();\r\n\t\t},\r\n\t\thandleARFrame1() {\r\n\t\t\tvar rawPoints = this.points84By63;\r\n\t\t\tlet len = 106;\r\n\t\t\tfor (var i = 0; i < 84; i++) {\r\n\t\t\t\trawPoints.unshift(0.1, 0.1);\r\n\t\t\t}\r\n\t\t\tfor (var i = 104; i < len; i++) {\r\n\t\t\t\trawPoints.push(0.1, 0.1);\r\n\t\t\t}\r\n\t\t\tfunction transformPoint(point, fw, fh) {\r\n\t\t\t\treturn [(point[0] / fw) * 2 - 1, (1 - point[1] / fh) * 2 - 1];\r\n\t\t\t}\r\n\t\t\tvar points = []\r\n\t\t\r\n\t\t\tfor (var i = 0; i < 106; i++) {\r\n\t\t\t\tpoints.push(transformPoint([rawPoints[i * 2], rawPoints[i * 2 + 1]], this.imgWidth, this.imgHeight));\r\n\t\t\t}\r\n\t\t\r\n\t\t\tconsole.log(points,'...gl 出来了么....',this.imgWidth,this.imgHeight)\r\n\t\t\tthis.points = points;\r\n\t\t},\r\n\t\tcanvasWxFn() {\r\n\t\t\tthis.handleARFrame1();\r\n\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\tvar self = this;\r\n\t\t\ttranslucent = 0.7;\r\n\t\t\tlipMarkBeginIndex = this.lipMarkBeginIndex = 84;\r\n\t\t\t// this.lipScale = 0.01;\r\n\t\t\r\n\t\t\ttry {\r\n\t\t\t\tuni.createSelectorQuery()\r\n\t\t\t\t\t.select('#arcanvas')\r\n\t\t\t\t\t.fields({ node: true, size: true })\r\n\t\t\t\t\t.exec(res => {\r\n\t\t\t\t\t\tconsole.log('drawAiwendy', res);\r\n\t\t\t\t\t\tconst c = res[0].node;\r\n\t\t\t\t\t\tvar systemInfo = uni.getSystemInfoSync();\r\n\t\t\t\t\t\tconsole.log('。。。systemInfo。。', this.canvasObj, this.canvasObj);\r\n\t\t\t\t\t\tc.height = this.canvasObj.height;\r\n\t\t\t\t\t\tc.width = this.canvasObj.width;\r\n\t\t\t\t\t\tconsole.log(c.width, '。。。。。。。uni.createCanvas。。success。', c);\r\n\t\t\t\t\t\tthis.gl = c.getContext('webgl');\r\n\t\t\t\t\t\tgl = this.gl;\r\n\t\t\t\t\t\tthis.canvas = c;\r\n\t\t\t\t\t\tcanvas = c;\r\n\t\t\t\t\t\tconsole.log(this.points,'。。。。。。。uni.createCanvas。。success。', gl);\r\n\t\t\t\t\t\t// this.renderImg()\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tPromise.all([this.changeLipStyle(this.imgLipstick),\r\n\t\t\t\t\t\t\tthis.changeLipStyle(this.imgModel)\r\n\t\t\t\t\t\t]).then(res=>{\r\n\t\t\t\t\t\t\tconsole.log('zhixingwanbi 哈哈哈',res)\r\n\t\t\t\t\t\t\tthis.initRenderPipeline();\r\n\t\t\t\t\t\t\tgl.bindTexture(gl.TEXTURE_2D, cameraTexture);\r\n\t\t\t\t\t\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, res[1]);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tgl.bindTexture(gl.TEXTURE_2D, lipTexture);\r\n\t\t\t\t\t\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, res[0]);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// var dataFrame = new Uint8Array(res1.data);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.drawFaceLip(this.points);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// this.drawFacePoints(this.points);\r\n\t\t\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\t\t\tconsole.log('失败 哈哈哈',err)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t} catch (e) {\r\n\t\t\t\t//TODO handle the exception\r\n\t\t\t\tconsole.log('....', e);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// #endif\r\n\t\t\t// this.onCanvasReady('arcanvas')\r\n\t\t},\r\n\t\t\r\n\t\tsetCanvasWh() {\r\n\t\t\tvar systemInfo = my.getSystemInfoSync();\r\n\t\t\tlet w = systemInfo.windowWidth;\r\n\t\t\tlet h = systemInfo.windowHeight;\r\n\t\t\tlet r = 720 / 1280;\r\n\t\t\tif (w / h < r) {\r\n\t\t\t\t// 表示高是短边,现在宽剧中\r\n\t\t\t\tthis.canvasObj.height = h;\r\n\t\t\t\tthis.canvasObj.width = r * h;\r\n\t\t\t\tthis.canvasObj.top = 0 + 'px';\r\n\t\t\t\tthis.canvasObj.left = (w - this.canvasObj.width) / 2;\r\n\t\t\t} else {\r\n\t\t\t\tthis.canvasObj.width = w;\r\n\t\t\t\tthis.canvasObj.height = w / r;\r\n\t\t\t\tthis.canvasObj.top = (h - this.canvasObj.height) / 2;\r\n\t\t\t\tthis.canvasObj.left = 0;\r\n\t\t\t}\r\n\t\t\tthis.canvasObj.pixelRatio = systemInfo.pixelRatio;\r\n\t\t\tconsole.log(w / h < r, '。。。。。。。this.canvasObj。。。', this.canvasObj);\r\n\t\t},\r\n\t\tonCanvasReady(id) {\r\n\t\t\t// #ifdef MP-ALIPAY\r\n\r\n\t\t\t// 页面加载完成\r\n\t\t\tvar self = this;\r\n\t\t\ttranslucent = this.translucent * translucentBase;\r\n\t\t\tlipMarkBeginIndex = this.lipMarkBeginIndex = 84;\r\n\t\t\tlipScale = this.lipScale = 0.01;\r\n\t\t\tmy._createCanvas({\r\n\t\t\t\tid,\r\n\t\t\t\tsuccess: c => {\r\n\t\t\t\t\tvar systemInfo = my.getSystemInfoSync();\r\n\t\t\t\t\tconsole.log('。。。systemInfo。。', JSON.stringify(systemInfo));\r\n\t\t\t\t\tc.height = this.canvasObj.height * systemInfo.pixelRatio;\r\n\t\t\t\t\tc.width = this.canvasObj.width * systemInfo.pixelRatio;\r\n\t\t\t\t\tconsole.log('。。。。。。。my.createCanvas。。success。', c);\r\n\t\t\t\t\tself.gl = c.getContext('webgl');\r\n\t\t\t\t\tgl = self.gl;\r\n\t\t\t\t\tself.canvas = c;\r\n\t\t\t\t\tcanvas = c;\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tfail: () => {\r\n\t\t\t\t\tconsole.log('。。。。。。。my.createCanvas。。fail。');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.initRenderPipeline();\r\n\t\t\t\r\n\t\t\tthis.changeLipStyle(this.imgLipstick);\r\n\t\t\tthis.faceBeautyFn();\r\n\t\t\t// #endif\r\n\t\t},\r\n\r\n\r\n\t\tinitRenderPipeline() {\r\n\t\t\t var vertCode = \n\t\t\t\t\t  `#version 300 es\n\t\t\t\t\t  layout(location = 0) in vec2 a_position;\n\t\t\t\t\t  layout(location = 1) in vec3 a_uv;\n\t\t\t\t\t  out vec3 uv_out;\n\t\t\t\t\t  void main() {\n\t\t\t\t\t\tgl_Position = vec4(a_position, 1.0, 1.0);\n\t\t\t\t\t\tuv_out = a_uv;\n\t\t\t\t\t\t//uv_out = vec2(1.0, 0.0);\n\t\t\t\t\t  }\n\t\t\t\t\t  `;\n\n\t\t\t\tconst fragCode = \n\t\t\t\t\t  `#version 300 es\n\t\t\t\t\t  precision mediump float;\n\t\t\t\t\t  in vec3 uv_out;\n\t\t\t\t\t  uniform sampler2D u_texture;\n\t\t\t\t\t  uniform sampler2D u_texture2;\n\t\t\t\t\t  layout(location = 0) out vec4 outColor;\n\t\t\t\t\t  void main() {\n\n\t\t\t\t\t\tvec2 uv = vec2(uv_out.x, 1.0 - uv_out.y);\n\t\t\t\t\t\tvec3 lipColor = texture(u_texture, uv).xyz;\n\t\t\t\t\t\tvec3 c = lipColor;\n\t\t\t\t\t\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\t\t\t\t\t\tvec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n\t\t\t\t\t\tvec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n\t\t\t\t\t\tfloat d = q.x - min(q.w, q.y);\n\t\t\t\t\t\tfloat e = 1.0e-10;\n\t\t\t\t\t\tvec3 hc = vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n\n\t\t\t\t\t\thc.y *= 1.2;\n\n\t\t\t\t\t\tvec4 L = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\t\t\t\t\t\tvec3 M = abs(fract(hc.xxx + L.xyz) * 6.0 - L.www);\n\t\t\t\t\t\tvec3 color = hc.z * mix(L.xxx, clamp(M - L.xxx, 0.0, 1.0), hc.y);\n\n\t\t\t\t\t\t//outColor = vec4(color, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t//vec4 lipColor = texture(u_texture, uv);\n\t\t\t\t\t\tvec4 frameColor = texture(u_texture2, uv_out.xy);\n\t\t\t\t\t\t//vec3 finalColor = lipColor.xyz * lipColor.w + frameColor.xyz * (1.0 - lipColor.w);\n\t\t\t\t\t\tfloat alpha = texture(u_texture, uv).w;\n\t\t\t\t\t\t//outColor = vec4(color.xyz, alpha);\n\t\t\t\t\t\toutColor = vec4(color.xyz, alpha * uv_out.z);\n\t\t\t\t\t  }\n\t\t\t\t\t  `;\n\t\t\t\n\t\t\tvertShader = gl.createShader(gl.VERTEX_SHADER);\n\t\t\tgl.shaderSource(vertShader, vertCode);\n\t\t\tgl.compileShader(vertShader);\n\t\t\tconsole.log(\"vertShader is compileShader \");\r\n\t\t\t\n\t\t\tfragShader = gl.createShader(gl.FRAGMENT_SHADER);\n\t\t\tgl.shaderSource(fragShader, fragCode);\n\t\t\tgl.compileShader(fragShader);\n\t\t\tconsole.log(\"fragShader is compileShader \");\r\n\t\t\t\n\t\t\tshaderProgram = gl.createProgram();\n\t\t\tgl.attachShader(shaderProgram, vertShader); \n\t\t\tgl.attachShader(shaderProgram, fragShader);\n\t\t\tgl.linkProgram(shaderProgram);\n\t\t\tgl.useProgram(shaderProgram);\n\t\t\tconsole.log(\"shaderProgram \");\n\n\t\t\tconst FSIZE = 4;\n\n\t\t\tvertexbuffer = gl.createBuffer();\n\t\t\tconst aposlocation = gl.getAttribLocation(shaderProgram, 'a_position');\n\t\t\tgl.enableVertexAttribArray(aposlocation);\n\t\t\tgl.vertexAttribPointer(aposlocation, 3, gl.FLOAT, false, FSIZE * 6, 0);\n\t\t\tconsole.log(\"aposlocation： \",aposlocation);\n\n\t\t\tconst auv = gl.getAttribLocation(shaderProgram, 'a_uv');\n\t\t\tgl.enableVertexAttribArray(auv);\n\t\t\tgl.vertexAttribPointer(auv, 3, gl.FLOAT, false, FSIZE * 6, FSIZE * 3);\n\t\t\tconsole.log(\"auv： \",auv);\r\n\t\t\t\r\n\t\t\t\n\t\t\tvar quadVertCode = \n\t\t\t\t  `#version 300 es\n\t\t\t\t  layout(location = 0) in vec2 a_position;\n\t\t\t\t  layout(location = 1) in vec2 a_uv;\n\t\t\t\t  out vec2 uv_out;\n\t\t\t\t  void main() {\n\t\t\t\t\tgl_Position = vec4(a_position, 1.0, 1.0);\n\t\t\t\t\tuv_out = a_uv;\n\t\t\t\t  }\n\t\t\t\t  `;\n\n\t\t\tconst quadFragCode = \n\t\t\t\t  `#version 300 es\n\t\t\t\t  precision mediump float;\n\t\t\t\t  in vec2 uv_out;\n\t\t\t\t  uniform sampler2D u_texture;\n\t\t\t\t  layout(location = 0) out vec4 outColor;\n\t\t\t\t  void main() {\n\t\t\t\t\tvec2 uv = vec2(uv_out.x, uv_out.y);\n\t\t\t\t\toutColor = vec4(texture(u_texture, uv).xyz, 1.0);\n\t\t\t\t  }\n\t\t\t\t  `;\n\n\t\t\tquadVertShader = gl.createShader(gl.VERTEX_SHADER);\n\t\t\tgl.shaderSource(quadVertShader, quadVertCode);\n\t\t\tgl.compileShader(quadVertShader);\n\n\t\t\tquadFragShader = gl.createShader(gl.FRAGMENT_SHADER);\n\t\t\tgl.shaderSource(quadFragShader, quadFragCode);\n\t\t\tgl.compileShader(quadFragShader);\n\n\t\t\tquadShaderProgram = gl.createProgram();\n\t\t\tgl.attachShader(quadShaderProgram, quadVertShader); \n\t\t\tgl.attachShader(quadShaderProgram, quadFragShader);\n\t\t\tgl.linkProgram(quadShaderProgram);\n\t\t\tgl.useProgram(quadShaderProgram);\n\n\n\t\t\tquadVertexbuffer = gl.createBuffer();\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, quadVertexbuffer);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, quadVertex, gl.STATIC_DRAW);\n\n\t\t\tconst qposlocation = gl.getAttribLocation(quadShaderProgram, 'a_position');\n\t\t\tgl.enableVertexAttribArray(qposlocation);\n\t\t\tgl.vertexAttribPointer(qposlocation, 2, gl.FLOAT, false, FSIZE * 4, 0);\n\t\t\tconsole.log(\"qposlocation： \",qposlocation);\n\n\t\t\tconst quv = gl.getAttribLocation(quadShaderProgram, 'a_uv');\n\t\t\tgl.enableVertexAttribArray(quv);\n\t\t\tgl.vertexAttribPointer(quv, 2, gl.FLOAT, false, FSIZE * 4, FSIZE * 2);\n\t\t\tconsole.log(\"quv： \",quv);\r\n\t\t\t\n\t\t\tgl.useProgram(0);\n\n\t\t\tlipTexture = gl.createTexture();\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, lipTexture);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n\n\t\t\tcameraTexture = gl.createTexture();\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, cameraTexture);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n\t\t\tgl.bindTexture(0);\n\n\t\t\tlipPoints = [];\n\t\t\tlipPointsScale = [];\n\t\t\tlipPointsUnScale = [];\n\t\t\tconst lipPointCount = 106 * 2;\n\t\t\tfor (var i = 0; i < lipPointCount; i++) {\n\t\t\t  lipPoints.push(0.0);\n\t\t\t  lipPoints.push(0.0);\n\t\t\t  lipPoints.push(0.0);\n\t\t\t  lipPoints.push(0.0);\n\t\t\t  lipPoints.push(0.0);\n\t\t\t}\n\n\t\t\t\r\n\t\t},\r\n\t\treleaseRenderFacePoints() {\r\n\t\t\tgl.deleteShader(this.facePoints.vertShader);\r\n\t\t\tgl.deleteShader(this.facePoints.fragShader);\r\n\t\t\tgl.deleteProgram(this.facePoints.shaderProgram);\r\n\t\t},\r\n\t\treleaseRenderResource() {\r\n\t\t\tgl.deleteShader(vertShader);\r\n\t\t\tgl.deleteShader(fragShader);\r\n\t\t\tgl.deleteProgram(shaderProgram);\r\n\t\t\tgl.deleteShader(quadVertShader);\r\n\t\t\tgl.deleteShader(quadFragShader);\r\n\t\t\tgl.deleteProgram(quadShaderProgram);\r\n\t\t\tgl.deleteBuffer(vertexbuffer);\r\n\t\t\tgl.deleteTexture(lipTexture);\r\n\t\t\tgl.deleteTexture(cameraTexture);\r\n\t\t\tthis.releaseRenderFacePoints();\r\n\t\t},\r\n\t\tdrawFaceLip(points) {\r\n\t\t\tconst lipPointCount = lipIndex.length;\n\t\t\tfor (var i = 0; i < lipPointCount; i++) {\n\t\t\t  var index = lipIndex[i];\r\n\t\t\t        lipPoints[i * 5] = points[index][0];\r\n\t\t\t        lipPoints[i * 5 + 1] = points[index][1];\r\n\t\t\t        lipPoints[i * 5 + 2] = lipTexCoordnate[2 * (index - lipMarkBeginIndex)];\r\n\t\t\t        lipPoints[i * 5 + 3] = lipTexCoordnate[2 * (index - lipMarkBeginIndex) + 1];\r\n\t\t\t        lipPoints[i * 5 + 4] = translucent;\n\t\t\t}\n\n\t\t\t\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, vertexbuffer);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(lipPoints), gl.STREAM_DRAW);\n\n\t\t\tgl.clearColor(0.0,0.0,0.0,0.0);\r\n\t\t\t// gl.clearDepth(1.0);\r\n\t\t\tgl.clear(gl.COLOR_BUFFER_BIT);\r\n\t\t\tgl.disable(gl.DEPTH_TEST);\n\t\t\t\n\n\n\t\t\tconst FSIZE = 4;\n\n\t\t\t//Pass one\n\t\t\tgl.disable(gl.BLEND);\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, quadVertexbuffer);\r\n\t\t\tconsole.log('draw quadVertexbuffer:',quadVertexbuffer)\n\n\t\t\tconst qposlocation = gl.getAttribLocation(quadShaderProgram, 'a_position');\n\t\t\tgl.vertexAttribPointer(qposlocation, 2, gl.FLOAT, false, FSIZE * 4, 0);\n\t\t\tgl.enableVertexAttribArray(qposlocation);\n\t\t\tconsole.log('draw qposlocation:',qposlocation)\n\t\t\t\n\n\t\t\tconst quv = gl.getAttribLocation(quadShaderProgram, 'a_uv');\n\t\t\tgl.vertexAttribPointer(quv, 2, gl.FLOAT, false, FSIZE * 4, FSIZE * 2);\n\t\t\tgl.enableVertexAttribArray(quv);\n\t\t\tconsole.log('draw quv:',quv)\r\n\t\t\t\r\n\t\t\t\n\t\t\tgl.activeTexture(gl.TEXTURE0);\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, cameraTexture);\n\t\t\tgl.useProgram(quadShaderProgram);\n\t\t\t//gl.polygonMode(gl.FRONT_AND_BACK, gl.FILL);\n\t\t\tgl.drawArrays(gl.TRIANGLES, 0, 6);\n\t\t\tconsole.log('draw drawArrays zhengge :')\r\n\t\t\t\r\n\t\t\t\n\t\t\t//Pass two\n\t\t\tgl.enable(gl.BLEND);\n\t\t\t// gl.enable(gl.DEPTH_TEST);\n\t\t\t// gl.depthFunc(gl.LESS);\n\t\t\tgl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\t\t\tgl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, vertexbuffer);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(lipPoints), gl.STREAM_DRAW);\n\n\t\t\tconst aposlocation = gl.getAttribLocation(shaderProgram, 'a_position');\n\t\t\tgl.vertexAttribPointer(aposlocation, 2, gl.FLOAT, false, FSIZE * 5, 0);\n\t\t\tgl.enableVertexAttribArray(aposlocation);\n\t\t\tconsole.log('draw aposlocation :',aposlocation)\n\n\t\t\tconst auv = gl.getAttribLocation(shaderProgram, 'a_uv');\n\t\t\tgl.vertexAttribPointer(auv, 3, gl.FLOAT, false, FSIZE * 5, FSIZE * 2);\r\n\t\t\tgl.enableVertexAttribArray(auv);\n\t\t\tconsole.log('draw auv :',auv)\r\n\t\t\t\n\t\t\tgl.activeTexture(gl.TEXTURE0);\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, lipTexture);\n\t\t\tgl.activeTexture(gl.TEXTURE1);\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, cameraTexture);\n\t\t\tgl.useProgram(shaderProgram);\n\t\t\t//gl.polygonMode(gl.FRONT_AND_BACK, gl.LINE);\n\t\t\t\n\t\t\tgl.drawArrays(gl.TRIANGLES, 0, 60);\r\n\t\t},\r\n\t\tchangeLipStyle1(lipTexturePath) {\r\n\t\t\t//let imgPath = '/static/images/lipColor.png';\r\n\r\n\t\t\t\r\n\t\t\t//let imgPath = '/static/images/lipColor.png';\r\n\t\t\tlet imgPath = lipTexturePath;\r\n\t\t\timg = canvas.createImage();\r\n\t\t\timg.onload = function() {\r\n\t\t\t\tgl.bindTexture(gl.TEXTURE_2D, lipTexture);\r\n\t\t\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\r\n\t\t\t};\r\n\t\t\timg.onerror = res => {\r\n\t\t\t\tconsole.log('......图片错误..', res, img);\r\n\t\t\t};\r\n\t\t\timg.src = imgPath;\r\n\t\t},\r\n\t\tchangeLipStyle(lipTexturePath) {\r\n\t\t\t//let imgPath = '/static/images/lipColor.png';\r\n\t\t\t// //唇彩图片\r\n\t\t\t// var img;\r\n\t\t\t// //唇彩图片路径\r\n\t\t\t// var imgPath;\r\n\t\t\t\r\n\t\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\t\tconsole.log(this.canvas, '......图片.this.canvas.', lipTexturePath);\r\n\t\t\t\tlet imgPath = lipTexturePath;\r\n\t\t\t\tlet img1 = canvas.createImage();\r\n\t\t\t\timg1.onload =  (res) => {\r\n\t\t\t\t\t// this.initRenderPipeline();\r\n\t\t\t\t\t// gl.bindTexture(gl.TEXTURE_2D, lipTexture);\r\n\t\t\t\t\t// gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\r\n\t\t\t\t\tresolve(img1)\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log(lipTexture,'......图片..', res, img);\r\n\t\t\t\t\t\r\n\t\t\t\t};\r\n\t\t\t\timg1.onerror = res => {\r\n\t\t\t\t\tconsole.log('......图片错误..', res, img);\r\n\t\t\t\t\treject()\r\n\t\t\t\t};\r\n\t\t\t\timg1.src = imgPath;\r\n\t\t\t})\r\n\t\t\t\r\n\t\t},\r\n\r\n\t\tupdateFaceData(data, width, height) {\r\n\t\t\tvar dataFrame = new Uint8Array(data);\r\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, cameraTexture);\r\n\t\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, dataFrame);\r\n\t\t},\r\n\t\tdrawFacePoints(points) {\r\n\t\t\tvar pointCount = points.length;\r\n\t\t\tif (pointCount == 0) return;\r\n\t\t\tvar vertices = [];\r\n\t\t\tfor (var i = 0; i < pointCount; i++) {\r\n\t\t\t\tvertices.push(points[i][0]);\r\n\t\t\t\tvertices.push(points[i][1]);\r\n\t\t\t\tvertices.push(0.0);\r\n\t\t\t}\r\n\r\n\t\t\t// Create an empty buffer object to store the vertex buffer\r\n\t\t\tvar vertex_buffer = gl.createBuffer();\r\n\r\n\t\t\t//Bind appropriate array buffer to it\r\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, vertex_buffer);\r\n\r\n\t\t\t// Pass the vertex data to the buffer\r\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\r\n\t\t\t// Unbind the buffer\r\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n\r\n\t\t\t/*=========================Shaders========================*/\r\n\r\n\t\t\t// vertex shader source code\r\n\t\t\tvar vertCode = `attribute vec3 coordinates;\r\n\t\t    void main(void) {\r\n\t\t\t\tgl_Position = vec4(coordinates, 1.0);\r\n\t\t\t\tgl_PointSize = 5.0;\r\n\t\t    }`;\r\n\r\n\t\t\t// Create a vertex shader object\r\n\t\t\tthis.facePoints.vertShader = gl.createShader(gl.VERTEX_SHADER);\r\n\t\t\t// Attach vertex shader source code\r\n\t\t\tgl.shaderSource(this.facePoints.vertShader, vertCode);\r\n\r\n\t\t\t// Compile the vertex shader\r\n\t\t\tgl.compileShader(this.facePoints.vertShader);\r\n\r\n\t\t\t// fragment shader source code\r\n\t\t\tvar fragCode = `precision mediump float;\r\n\t\t\tuniform vec4 u_FragColor;\r\n\t\t\tvoid main(){\r\n\t\t\t    gl_FragColor=u_FragColor;\r\n\t\t\t}`;\r\n\r\n\t\t\t// Create fragment shader object\r\n\t\t\tthis.facePoints.fragShader = gl.createShader(gl.FRAGMENT_SHADER);\r\n\r\n\t\t\t// Attach fragment shader source code\r\n\t\t\tgl.shaderSource(this.facePoints.fragShader, fragCode);\r\n\r\n\t\t\t// Compile the fragmentt shader\r\n\t\t\tgl.compileShader(this.facePoints.fragShader);\r\n\r\n\t\t\t// Create a shader program object to store\r\n\t\t\t// the combined shader program\r\n\t\t\tthis.facePoints.shaderProgram = gl.createProgram();\r\n\r\n\t\t\t// Attach a vertex shader\r\n\t\t\tgl.attachShader(this.facePoints.shaderProgram, this.facePoints.vertShader);\r\n\r\n\t\t\t// Attach a fragment shader\r\n\t\t\tgl.attachShader(this.facePoints.shaderProgram, this.facePoints.fragShader);\r\n\r\n\t\t\t// Link both programs\r\n\t\t\tgl.linkProgram(this.facePoints.shaderProgram);\r\n\r\n\t\t\t// Use the combined shader program object\r\n\t\t\tgl.useProgram(this.facePoints.shaderProgram);\r\n\r\n\t\t\t/*======== Associating shaders to buffer objects ========*/\r\n\r\n\t\t\t// Bind vertex buffer object\r\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, vertex_buffer);\r\n\r\n\t\t\t// Get the attribute location\r\n\t\t\tvar coord = gl.getAttribLocation(this.facePoints.shaderProgram, 'coordinates');\r\n\r\n\t\t\t// Point an attribute to the currently bound VBO\r\n\t\t\tgl.vertexAttribPointer(coord, 3, gl.FLOAT, false, 0, 0);\r\n\r\n\t\t\t//获取uniform 变量\r\n\t\t\tconst u_FragColor = gl.getUniformLocation(this.facePoints.shaderProgram, 'u_FragColor');\r\n\t\t\tlet rgba = this.isShowFacePoints ? 1.0 : 0.0;\r\n\t\t\t//修改uniform 变量\r\n\t\t\tgl.uniform4f(u_FragColor, 1.0, 0.0, 0.0, 1.0);\r\n\r\n\t\t\t// gl.clearColor(0.0,0.0,0.0,0.0);\r\n\t\t\t// gl.clear(gl.COLOR_BUFFER_BIT);\r\n\t\t\t// Draw the triangle\r\n\t\t\tgl.drawArrays(gl.POINTS, 0, pointCount);\r\n\t\t}\r\n\t},\r\n\tmounted() {},\r\n\tonShow() {\r\n\t\t// this.$nextTick(() => {\r\n\t\t// \tthis.$refs.brightness.getScreenBrightness()\r\n\t\t// })\r\n\t},\r\n\tasync onLoad() {},\r\n\tbeforeDestroy() {\r\n\t\t// 退出释放资源\r\n\t\tthis.releaseRenderResource();\r\n\t},\r\n\tonUnload() {},\r\n\tonHide() {}\r\n};\r\n</script>\r\n<style>\r\n.container {\r\n\tposition: relative;\r\n\twidth: 100vw;\r\n\theight: 100vh;\r\n}\r\n.mode-img {\r\n\tposition: absolute;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n}\r\n#arcanvas {\r\n\tposition: absolute;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tz-index: 11;\r\n}\r\n</style>\n","import mod from \"-!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.3.3.11.20220209\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1667464557305\n      var cssReload = require(\"E:/软件/HBuilderX.3.3.11.20220209/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}